(this["webpackJsonpkaiteki-jousha-front"]=this["webpackJsonpkaiteki-jousha-front"]||[]).push([[0],{166:function(t,e,n){},167:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),c=(n(68),n(10)),u=n.n(c),s=n(17),l=n(25),p=n(12),m=n(32),f=n(26),h=n(31),d=n(169),v=n(171),k=n(168),w=n(4),b=n.n(w),j=n(170),y=n(60),E=n(42),O=n.n(E),x=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(m.a)(this,Object(f.a)(e).call(this,t))).state={pin:t.pin},n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"calcLine",value:function(t){return new Promise((function(e){e({labels:t.map((function(t){return O()(t.created_at).format("HH:mm:ss")})),datasets:[{label:"\u4e0d\u5feb\u6307\u6570",fill:!1,data:t.map((function(t){return t.fukai}))}]})}))}},{key:"componentDidMount",value:function(){var t=Object(s.a)(u.a.mark((function t(){var e,n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://fukai.mybluemix.net/get-history/".concat(this.state.pin.uuid));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.next=8,this.calcLine(n);case 8:a=t.sent,this.setState({data:a});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.pin,n=t.data;return r.a.createElement(j.a,{autoClose:!1},r.a.createElement("p",null,"UUID: ",e.uuid,", \u6c17\u6e29: ",e.temperature,", \u6e7f\u5ea6: ",e.humidity),r.a.createElement(y.a,{data:n}))}}]),e}(r.a.Component);function g(t){t&&t.leafletElement.openPopup()}function I(t){var e=t<60?"blue":60<=t&&t>=70?"kaiteki":"red";return new b.a.Icon({iconUrl:"http://".concat(window.location.host).concat(window.location.pathname,"/icons/marker-").concat(e,".png")})}var U=function(t){var e=t.pin;return r.a.createElement(k.a,{ref:g,position:e.position,icon:I(e.fukai)},r.a.createElement(x,{pin:e}))},C=(n(166),function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(m.a)(this,Object(f.a)(e).call(this,t))).state={now:[]},n}return Object(h.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=Object(s.a)(u.a.mark((function t(){var e=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.timer=setInterval(Object(s.a)(u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://fukai.mybluemix.net/now");case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,e.setState({now:a});case 7:case"end":return t.stop()}}),t)}))),5e3);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var t=this.state.now.map((function(t){return r.a.createElement(U,{pin:t,key:t._id})}));return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h3",null,"\u516c\u5171\u4ea4\u901a\u6a5f\u95a2\u3092\u5feb\u9069\u306b\u5229\u7528\u3059\u308b\u4f1a"),r.a.createElement("a",{href:"#about"},"About")),r.a.createElement(d.a,{id:"map",center:[41.8327605,140.7515623],zoom:13},r.a.createElement(v.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t))}}]),e}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},63:function(t,e,n){t.exports=n(167)},68:function(t,e,n){}},[[63,1,2]]]);
//# sourceMappingURL=main.2089968a.chunk.js.map