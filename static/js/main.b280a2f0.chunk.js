(this["webpackJsonpkaiteki-jousha-front"]=this["webpackJsonpkaiteki-jousha-front"]||[]).push([[0],{166:function(t,e,n){},167:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(24),c=n.n(i),o=(n(67),n(10)),s=n.n(o),u=n(17),l=n(25),p=n(12),f=n(32),h=n(26),m=n(31),v=n(169),d=n(171),k=n(168),w=n(4),b=n.n(w),j=n(170),y=n(59),O=function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(f.a)(this,Object(h.a)(e).call(this,t))).state={pin:t.pin},n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"calcLine",value:function(t){return new Promise((function(e){e({labels:t.map((function(t){return t.created_at})),datasets:[{label:"\u4e0d\u5feb\u6307\u6570",fill:!1,data:t.map((function(t){return t.fukai}))}]})}))}},{key:"componentDidMount",value:function(){var t=Object(u.a)(s.a.mark((function t(){var e,n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://fukai.mybluemix.net/get-history/".concat(this.state.pin.uuid));case 2:return e=t.sent,t.next=5,e.json();case 5:return n=t.sent,t.next=8,this.calcLine(n);case 8:a=t.sent,this.setState({data:a});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.pin,n=t.data;return r.a.createElement(j.a,null,r.a.createElement("p",null,"UUID: ",e.uuid),r.a.createElement(y.a,{data:n}))}}]),e}(r.a.Component);var x=function(t){var e=t.pin;return r.a.createElement(k.a,{position:e.position,icon:function(t){var e=t<60?"blue":60<=t&&t>=70?"kaiteki":"red";return new b.a.Icon({iconUrl:"http://".concat(window.location.host,"/icons/marker-").concat(e,".png")})}(e.fukai)},r.a.createElement(O,{pin:e}))},E=(n(166),function(t){function e(t){var n;return Object(l.a)(this,e),(n=Object(f.a)(this,Object(h.a)(e).call(this,t))).state={now:[]},n}return Object(m.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=Object(u.a)(s.a.mark((function t(){var e=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.timer=setInterval(Object(u.a)(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://fukai.mybluemix.net/now");case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,e.setState({now:a});case 7:case"end":return t.stop()}}),t)}))),5e3);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var t=this.state.now.map((function(t){return r.a.createElement(x,{pin:t,key:t._id})}));return r.a.createElement("div",{className:"App"},r.a.createElement(v.a,{id:"map",center:[41.8327605,140.7515623],zoom:13},r.a.createElement(d.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t))}}]),e}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},62:function(t,e,n){t.exports=n(167)},67:function(t,e,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.b280a2f0.chunk.js.map